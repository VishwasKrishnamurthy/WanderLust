<% layout('/layouts/boilerplate') %>

<body class="bg-light">
  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-md-8 col-lg-6">
        <div class="card shadow-sm border-0">
          <div class="card-body p-4">
            <h3 class="text-center mb-4 text-primary">Edit Listing</h3>
            <form action="/listings/<%= result._id %>?_method=PUT" method="post" class="needs-validation" novalidate enctype="multipart/form-data">
              
              <!-- Title Field -->
              <div class="form-group mb-3">
                <label for="title" class="form-label fw-medium">Title</label>
                <input type="text" id="title" name="title" value="<%= result.title %>" class="form-control" required>
                <div class="valid-feedback">Title looks good!</div>
                <div class="invalid-feedback">Please provide a valid title.</div>
              </div>

              <!-- Description Field -->
              <div class="form-group mb-3">
                <label for="description" class="form-label fw-medium">Description</label>
                <textarea required id="description" name="description" class="form-control" rows="4" cols="8"><%= result.description %></textarea>
                <div class="valid-feedback">Description looks good!</div>
                <div class="invalid-feedback">Please write a description.</div>
              </div>

              <!-- Cost and Country Fields -->
              <div class="row mb-3">
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="cost" class="form-label fw-medium">Cost</label>
                    <input type="number" id="cost" name="cost" value="<%= result.price %>" class="form-control" min="0" required>
                    <div class="invalid-feedback">Please provide a valid cost.</div>
                  </div>
                </div>
                <div class="col-md-8">
                  <div class="form-group">
                    <label for="country" class="form-label fw-medium">Country</label>
                    <input type="text" id="country" name="country" value="<%= result.country %>" class="form-control country" required>
                    <div class="invalid-feedback">Please enter a valid country.</div>
                  </div>
                </div>
              </div>

              <!-- Location Field -->
              <div class="form-group mb-3">
                <label for="location" class="form-label fw-medium">Location</label>
                <input type="text" id="location" name="location" value="<%= result.location %>" class="form-control" required>
                <div class="invalid-feedback">Please provide a valid location</div>
              </div>

              <!-- Image Upload Field -->
              <div class="form-group mb-4">
                <label for="image" class="form-label fw-medium">Add new images</label>
                <input type="file" id="image" name="image" class="form-control" multiple>
              </div>

              <!-- Submit Button -->
              <div class="d-grid">
                <button type="submit" class="btn btn-primary btn-lg">Update Listing</button>
              </div>
              
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <style>
    .form-control {
      border: 1px solid #dee2e6;
      padding: 0.75rem;
      border-radius: 0.5rem;
      transition: all 0.3s ease;
    }

    .form-control:focus {
      border-color: var(--primary-color, #ff385c);
      box-shadow: 0 0 0 0.2rem rgba(255, 56, 92, 0.25);
    }

    .btn-primary {
      background-color: var(--primary-color, #ff385c);
      border-color: var(--primary-color, #ff385c);
      padding: 0.75rem;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .btn-primary:hover {
      background-color: #e31c5f;
      border-color: #e31c5f;
      transform: translateY(-2px);
    }

    .card {
      border-radius: 1rem;
      background: #fff;
    }

    .text-primary {
      color: var(--primary-color, #ff385c) !important;
    }

    .form-label {
      color: #484848;
      margin-bottom: 0.5rem;
    }
  </style>
</body>